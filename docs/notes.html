<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ross Gayler" />


<title>Notes</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/master/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>



<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Frequency-Aware Similarity Calibration</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rgayler/fa_sim_cal">
    <span class="fas fa-github"></span>
     
    Source code
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Notes</h1>
<h4 class="author">Ross Gayler</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
workflowr
<span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks">
Checks <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2021-01-16
</p>
<p>
<strong>Checks:</strong>
<span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
2
<span class="glyphicon glyphicon-exclamation-sign text-danger" aria-hidden="true"></span>
0
</p>
<p>
<strong>Knit directory:</strong>
<code>fa_sim_cal/</code>
<span class="glyphicon glyphicon-question-sign" aria-hidden="true" title="This is the local directory in which the code in this file was executed.">
</span>
</p>
<p>
This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a>
analysis was created with <a
  href="https://github.com/jdblischak/workflowr">workflowr</a> (version
1.6.2). The <em>Checks</em> tab describes the
reproducibility checks that were applied when the results were created.
The <em>Past versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate">
<span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
<strong>R Markdown file:</strong> up-to-date
</a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate" class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git repository, you
know the exact version of the code that produced these results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomrgaylerfasimcaltreee6721d372917127574bdc931df4576a7bd2345c4targetblanke6721d3a">
<span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
<strong>Repository version:</strong> <a href="https://github.com/rgayler/fa_sim_cal/tree/e6721d372917127574bdc931df4576a7bd2345c4" target="_blank">e6721d3</a>
</a>
</p>
</div>
<div id="strongRepositoryversionstrongahrefhttpsgithubcomrgaylerfasimcaltreee6721d372917127574bdc931df4576a7bd2345c4targetblanke6721d3a" class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development and
connecting the code version to the results is critical for reproducibility.
</p>
<p>
The results in this page were generated with repository version <a href="https://github.com/rgayler/fa_sim_cal/tree/e6721d372917127574bdc931df4576a7bd2345c4" target="_blank">e6721d3</a>.
See the <em>Past versions</em> tab to see a history of the changes made to the
R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for the
analysis have been committed to Git prior to generating the results (you can
use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only
checks the R Markdown file, but you know if there are other scripts or data
files that it depends on. Below is the status of the Git repository when the
results were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/
    Ignored:    .tresorit/
    Ignored:    data/VR_20051125.txt.xz
    Ignored:    output/ent_cln.fst
    Ignored:    output/ent_raw.fst
    Ignored:    renv/library/
    Ignored:    renv/staging/

Untracked files:
    Untracked:  analysis/02-1_block_vars.Rmd

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in
this status report because it is ok for generated content to have uncommitted
changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the repository in which changes were made
to the R Markdown (<code>analysis/notes.Rmd</code>) and HTML (<code>docs/notes.html</code>)
files. If you’ve configured a remote Git repository (see
<code>?wflow_git_remote</code>), click on the hyperlinks in the table below to
view the files as they were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/rgayler/fa_sim_cal/blob/e6721d372917127574bdc931df4576a7bd2345c4/analysis/notes.Rmd" target="_blank">e6721d3</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-16
</td>
<td>
Add blocking to notes.Rmd
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/rgayler/fa_sim_cal/5ab5dc465e2faee2e8450ec148085b0ce634dee4/docs/notes.html" target="_blank">5ab5dc4</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-15
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/rgayler/fa_sim_cal/blob/c674a51143f78ae013f84d528bfa8d4d55e42f87/analysis/notes.Rmd" target="_blank">c674a51</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-15
</td>
<td>
Add 01-6 clean vars
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/rgayler/fa_sim_cal/0b67848ad7f059c14f7f8ec0a7f4904b9a65200c/docs/notes.html" target="_blank">0b67848</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-06
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/rgayler/fa_sim_cal/blob/ec38ffcf7c8c70f12ca927f7d762b01d2a52be00/analysis/notes.Rmd" target="_blank">ec38ffc</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-06
</td>
<td>
wflow_publish("analysis/no*.Rmd")
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/rgayler/fa_sim_cal/03ad32429914a222b6d099b1294971e974e5cdda/docs/notes.html" target="_blank">03ad324</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-05
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/rgayler/fa_sim_cal/blob/b03a2c1dd5445240cd6f89d8b8bf92d8a23ae83a/analysis/notes.Rmd" target="_blank">b03a2c1</a>
</td>
<td>
Ross Gayler
</td>
<td>
2021-01-05
</td>
<td>
wflow_publish(c(“analysis/index.Rmd”, “analysis/notes.Rmd”))
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<p>This document is for keeping notes of any points that may be useful for
later project or manuscript development and which are not covered in the
analysis notebooks or at risk of getting lost in the notebooks.</p>
<div id="project-infrastructure" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Project infrastructure</h1>
<ul>
<li>Consider using the <a href="https://wlandau.github.io/targets/">targets</a>
package to control the computational workflow.</li>
</ul>
</div>
<div id="identity-data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Identity data</h1>
<ul>
<li><p>Get a sizeable publicly available data set with personal names
(NCVR).</p>
<ul>
<li>The focus of the empirical work is on string similarity metrics
of names.</li>
</ul></li>
<li><p>Use sex and age in addition to personal names so that most records
are discriminable.</p>
<ul>
<li><p>High frequency names will likely not be discriminable with only
these attributes.</p>
<ul>
<li>This is not a problem because we are really interested in
whether the methods proposed here assist in quantifying the
discriminability of records. We want records spanning a wide
range of discriminability.</li>
</ul></li>
<li><p>Age (and possibly sex) will be used as a blocking variable.</p>
<ul>
<li>Blocking is probably needed to make the project
computationally tractable.</li>
</ul></li>
<li><p>Age and sex are also of interest in the calculation of name
frequency because name distributions should vary conditional on
age and sex.</p></li>
</ul></li>
<li><p>Keep address and phone number as they may be useful for manually
checking identity in otherwise nondiscriminable records.</p>
<ul>
<li>As a fallback position, address and phone number can be used as
discriminating attributes in the compatibility model.</li>
</ul></li>
<li><p>Get the oldest available data to minimise it’s currency (NCVR 2005
snapshot).</p></li>
<li><p>Drop objectionable attributes such as race and political
affiliation.</p></li>
</ul>
</div>
<div id="identity-data-preparation" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Identity data preparation</h1>
<ul>
<li><p>Apply basic data cleaning to the predictive attributes.</p>
<ul>
<li><p>This is probably unnecessary given how the data will be used.</p></li>
<li><p>I can’t bring myself to model data without scrutinising it
first.</p></li>
</ul></li>
<li><p>Only keep records that are ACTIVE and VERIFIED for modelling.</p>
<ul>
<li><p>These are likely to have the highest data quality attributes.</p></li>
<li><p>These are least likely to have duplicate records (i.e. referring
to the same person).</p></li>
</ul></li>
</ul>
</div>
<div id="identity-data-characterisation" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Identity data characterisation</h1>
<ul>
<li><p>Look at frequency distributions of names conditional on name length.
The Zipf distributions may have different shape parameters for
different name lengths. Name length might be examined as an
alternative to name frequency for interaction with similarity.</p></li>
<li><p>Look at frequency distributions of names conditional on age and/or
sex</p>
<ul>
<li>These conditional distributions may increase the predictive
power of the compatibility model.</li>
</ul></li>
</ul>
</div>
<div id="blocking" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Blocking</h1>
<ul>
<li><p>Use blocking to reduce the number of comparisons, to keep the
computational cost feasible.</p></li>
<li><p>This project is not an operational system and we are only using
blocking to reduce the computational cost, so we can choose blocking
that would not be acceptable for an operational system.</p></li>
<li><p>Where the dictionary blocks vary widely in size we might choose to
work with only a subset of blocks that are a suitable size.</p></li>
<li><p>If we think that the some aspect of the compatibility modelling
might vary as a function of block size we would probably want to
test this over a wide range of block sizes.</p></li>
<li><p>We will probably be repeating analyses over some number of blocks to
assess the variability of results, but that might only be a subset
of blocks with no commitment to examine <em>all</em> the blocks.</p></li>
<li><p>Blocking can induce changes in the distributions of names.</p>
<ul>
<li><p>Blocking on sex (in combination with other variables) will
definitely give more homogeneity of first names within blocks
because of gendered names.</p></li>
<li><p>Blocking on age will give more homogeneity of first names within
blocks because of name popularity varying over time.</p></li>
<li><p>Blocking on county <em>may</em> give more homogeneity of last names
within blocks because of families living together.</p></li>
</ul></li>
</ul>
</div>
<div id="modelling" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Modelling</h1>
<ul>
<li><p>Try indicators for missingness. Missingness may be differentially
informative across different predictor variables.</p></li>
<li><p>Try indicators for similarity == 1. The compatibility of exact
string equality is not necessarily continuous with the compatibility
of similarity just below 1.</p></li>
<li><p>Try name frequency as an interactive predictor variable.</p>
<ul>
<li>Also consider frequency conditional on age and/or sex</li>
</ul></li>
<li><p>There are <em>two</em> names in each lookup: dictionary and query.
Therefore there are also two name frequencies to be considered.
Consider how to use <em>both</em> frequencies (e.g. min, max, geometric
mean, …).</p>
<ul>
<li><p>Queries may contain names that do not exist in the dictionary,
so we need to deal with that case.</p></li>
<li><p>Do we need to apply frequency smoothing, as used in
probabilistic linguistic models?</p></li>
<li><p>Do we need to estimate the probability mass of unobserved names?</p></li>
</ul></li>
<li><p>In general, the dictionary will be a subset of the entities in the
universe of queries. Consider the impact of this on modelling as the
fraction of the query universe in the dictionary varies.</p>
<ul>
<li>Consider whether this varies on a per query basis because of
blocking. That is, is there effectively a separate dictionary
per blocking value?</li>
<li>Can the sampling fraction be modelled as a prior probability
(effectively, a change in the intercept term of a logistic
regression)?</li>
<li>Consider using the same variable for blocking and as a predictor
to compare the effect on estimated probability of identity match
as a function of dictionary fraction.</li>
</ul></li>
</ul>
</div>
<div id="performance-evaluation" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Performance evaluation</h1>
<ul>
<li><p>Partition the records into a dictionary and a set of queries (the
<span class="math inline">\(Q_U\)</span> set).</p>
<ul>
<li>By the (reasonable) assumption that there are no duplicate
records, each of the <span class="math inline">\(Q_U\)</span> queries will be unmatched in the
dictionary.</li>
</ul></li>
<li><p>Select a subset of the dictionary records to use as the <span class="math inline">\(Q_M\)</span> query
set.</p>
<ul>
<li>By the (reasonable) assumption that there are no duplicate
records, each of the <span class="math inline">\(Q_M\)</span> queries will have exactly one
matching record in the dictionary.</li>
</ul></li>
<li><p>This is evaluation is different to the usual evaluation of entity
resolution in that it doesn’t consider the impact of
transcription/typographical variation in the queries.</p>
<ul>
<li>It looks at the quantification of discriminability when the
available attributes are not necessarily able to ensure that all
records are discriminable.</li>
</ul></li>
<li><p>If we are interested in the performance with respect to
transcription/typographical variation we may need to consider
artificially corrupting some of the queries.</p></li>
</ul>
</div>
<div id="writingtheory" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Writing/theory</h1>
<ul>
<li>Note relationship to Fellegi &amp; Sunter / probabilistic record linkage
(in proposal?)</li>
</ul>
<div id="blocking-1" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Blocking</h2>
<ul>
<li><p>It might be possible to develop (or at least explain) most of the
maths in terms of blocking.</p></li>
<li><p>Start with a universe <span class="math inline">\(E\)</span> of entities with the queries drawn
uniformly at random from that universe and the dictionary being
identical to the universe.</p></li>
<li><p>In the absence of any other information, the probability of each
dictionary element being an identity match with the query is $ 1 /
|E| $.</p></li>
<li><p>If the dictionary <span class="math inline">\(D\)</span> is a proper subset of <span class="math inline">\(E\)</span> it can be thought of
as a (not very informative) block. That is, a block can be thought
of as the dictionary induced by the query record.</p></li>
<li><p>If <span class="math inline">\(D\)</span> is a random subset of <span class="math inline">\(E\)</span>, and in the absence of any other
information, the probability of each dictionary element being an
identity match with the query is <span class="math inline">\((|D| / |E|) / |D| = 1 / |E|\)</span>.</p></li>
<li><p><span class="math inline">\(|D|\)</span> is the block size of the dictionary construed as a block. In
the absence of any information to discriminate between records in
the block, the larger the block, the lower the probability the any
block record is the identity match to the query record.</p></li>
<li><p><span class="math inline">\(|D| / |E|\)</span> is the probability that the entity corresponding to the
query record is in the dictionary/block, given that the dictionary
is a uniform random subset of the universe of entities.</p></li>
<li><p>Consider the other extreme, where blocking is perfect. That is, the
entity query record is guaranteed to be in the dictionary. In this
case the blocking is very informative (not a random selection from
the universe of entities). The probability that the correctly
matching entity record is in the block is 1, and the probability of
each dictionary/block element being an identity match with the query
is <span class="math inline">\(1 / |D|\)</span>.</p>
<ul>
<li><p>That is, with perfect blocking, the probability of each entity
being the identity match depends only on the block size.</p></li>
<li><p>Where blocking is based on, say, name, the block size is the
frequency of the name in the dictionary.</p></li>
<li><p>Where blocking is less then perfect the probability that the
entity corresponding to the query record is contained in the
block will be less than 1.</p></li>
</ul></li>
<li><p>This suggests that the probability of each record in the block being
the correct match could be calculated as the product of conditional
probabilities:</p>
<p><span class="math display">\[ P(id(q) = id(d_i)) = P(id(q) = id(d_i) | d_i \in B_j) P(d_i \in B_j | d_i \in D)  P(d_i \in D) \]</span></p></li>
<li><p>What we need are models to estimate those component probabilities. I
suspect that the cardinalities of those blocks would be very strong
predictors of the probabilities. If the blocks are defined in terms
of equality of names then the name frequencies determine the block
cardinalities.</p></li>
<li><p>If there were multiple independent blockings, the probability of
correct match of each record in the intersection of the blocks id
the product of the probabilities associated with each block. This is
equivalent to naive Bayes and shows the equivalence between
construing the problem as a multivariate regression and construing
it as using multiple blocking variables.</p>
<ul>
<li>Using regression rather than naive Bayes allows compensating for
the blocking variables not being independent.</li>
</ul></li>
</ul>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>




</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4,h5",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "site_libs/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
